{%- liquid
  assign product = products[request.params.handle]
-%}
{
  "id": {{ product.id | json }},
  "title": {{ product.title | json }},
  "handle": {{ product.handle | json }},
  "vendor": {{ product.vendor | json }},
  "type": {{ product.type | json }},
  "price": {{ product.price | json }},
  "price_min": {{ product.price_min | json }},
  "price_max": {{ product.price_max | json }},
  "variants": [
    {%- for variant in product.variants -%}
    {
      "id": {{ variant.id | json }},
      "title": {{ variant.title | json }},
      "price": {{ variant.price | json }},
      "sku": {{ variant.sku | json }},
      "inventory_quantity": {{ variant.inventory_quantity | json }}
    }{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ],
  "metafields": {
    "custom": {
      "bulk_pricing": {{ product.metafields.custom.bulk_pricing | json }}
    }
  }
}