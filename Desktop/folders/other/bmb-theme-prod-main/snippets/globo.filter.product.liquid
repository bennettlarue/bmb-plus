{%- comment -%}Do not edit this file{%- endcomment -%}
{% raw %}
  {%- assign swatch_options = 'Colour~~Color' | downcase | split: "~~" | uniq -%}
  {%- assign image_options  = '' | downcase | split: "~~" | uniq -%}
  {%- assign text_options   = 'Size' | downcase | split: "~~" | uniq  -%}

  {%- assign image_size     = '360x504' -%}
  {%- assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' -%}

  {%- assign featured_image            = product.featured_image -%}
  {%- assign product_price             = product.price -%}
  {%- assign product_compare_at_price  = product.compare_at_price -%}
  {%- assign selected_or_first_available_variant = product.selected_or_first_available_variant -%}
  {%- assign variant_url = '' -%}
                {%- assign images_count = product.images | size -%}
<div {% if showPageData %} data-page="{{page}}"{% endif %} class="spf-col-xl-3 spf-col-lg-3 spf-col-md-4 spf-col-sm-4 spf-col-6">
  <div class="spf-product-card spf-product-card__center spf-product-card__template-1{% unless product.available %} spf-soldout{% endunless %}">
    <div class="spf-product-card__inner">
      {%- unless product.available -%}
                  {%- endunless -%}
            <a class="spf-product-card__image-wrapper" href="{{root_url}}{{ product.url }}{{variant_url}}" style="padding-top:140%;">
        {%- if images_count > 0 -%}
          {%- for image in product.images -%}
            <img
              data-variants="{% if image.variant_ids %}{{image.variant_ids | join: ','}}{% endif %}"
              class="gflazyload spf-product-card__image spf-product-card__image-{% if featured_image.id == image.id %}main{% elsif image.id == product.second_image.id %}secondary{% else %}hidden{% endif %}"
              srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
              src="{{image.src | img_url: image_size}}"
              data-src="{{image.src | img_lazyload_url}}"
              data-sizes="auto"
              data-aspectratio="{{image.aspect_ratio}}"
              data-parent-fit="contain"
              alt="{{image.alt | escape}}"
            />
          {%- endfor -%}
        {%- else -%}
        <img data-variants="" class="gflazyload spf-product-card__image spf-product-card__image-main" src="{{no_image}}" alt="{{product.title | escape}}">
        {%- endif -%}
      </a>
      <form class="spf-product__form" action="{{ root_url }}/cart/add" method="post">
        <select name="id" class="spf-product__variants">
          {%- for variant in product.variants -%}
          <option data-option1="{{variant.option1 | escape}}" data-option2="{{variant.option2 | escape}}" data-option3="{{variant.option3 | escape}}" data-price="{{variant.price}}" data-compare_at_price="{{variant.compare_at_price}}" data-available="{{variant.available}}" data-image="{% if variant.image.src %}{{variant.image.src | img_url: image_size }}{% endif %}" {% if variant.id == selected_or_first_available_variant.id %} selected="selected" {% endif %} value="{{ variant.id }}">{{ variant.title }}</option>
          {%- endfor -%}
        </select>
              </form>
    </div>

    <div class="spf-product__info">      <div class="h4 spf-product-card__title">
        <a translatable href="{{root_url}}{{ product.url }}{{variant_url}}">{{product.title}}</a>
              </div>
      
      {% comment %}
      Custom code - lowest price
      {% endcomment %}
      {%- if product.metafields.custom.lowest_price -%}
      <div class="lowest-price" style="color:red; font-weight:bold">As Low As {{ product.metafields.custom.lowest_price | money }}</div>
      {%- endif -%}
                  
                    {%- for option in product.options -%}
          {%- assign optionIndex = 'option' | append: forloop.index -%}
          {%- assign optionIndexNumber = forloop.index -%}
          {%- if option.isSwatch -%}
            <div class="spf-product__swatchs">
              {%- for value in option.values -%}
                {%- assign swatch = option.swatches[forloop.index0] -%}
                <span data-option="{{optionIndexNumber}}" data-option-value="{{value | escape}}" class="spf-product__swatch{% if product.selected_or_first_available_variant and product.selected_or_first_available_variant[optionIndex] == value %} is-selected{% endif %}{% unless swatch.available %} soldout{% endunless %}" title="{{value | escape}}">
                  <span translatable class="spf-product__swatch-inner">
                    {%- if swatch.mode == 4 and swatch.image -%}
                      <span class="spf-product__swatch-image" style="background-image: url('{{ swatch.image | img_url: '24x' }}')"></span>
                    {%- elsif swatch.mode == 3 and swatch.image -%}
                      <span class="spf-product__swatch-image" style="background-image: url('{{ swatch.image }}')"></span>
                    {%- elsif swatch.mode == 2 and swatch.color_1 and swatch.color_2 -%}
                      <span class="spf-product__swatch-color" style="background-color: {{ swatch.color_1 }}"></span>
                      <span class="spf-product__swatch-color" style="border-right-color: {{ swatch.color_2 }}"></span>
                    {%- elsif swatch.mode == 1 and swatch.color_1 -%}
                      <span class="spf-product__swatch-color" style="background-color: {{ swatch.color_1 }}"></span>
                    {%- elsif swatch.lable -%}
                      <span class="spf-product__swatch-text">{{swatch.lable}}</span>
                    {%- else -%}
                      <span class="spf-product__swatch-text">{{value}}</span>
                    {%- endif -%}
                  </span>
                </span>
              {%- endfor -%}
            </div>
          {%- endif -%}
        {%- endfor -%}
          </div>
  </div>
</div>
      {% endraw %}
